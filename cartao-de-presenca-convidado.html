<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Confirma칞칚o de Presen칞a</title>
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      font-family: Arial, sans-serif;
      padding: 2rem;
      background-color: #f4f4f4;
      margin: 0;
    }

    h1 {
      text-align: center;
      font-size: 2rem;
      margin-bottom: 1rem;
    }

    form {
      background: white;
      padding: 1.5rem;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      max-width: 400px;
      margin: auto;
    }

    label {
      display: block;
      margin-top: 1rem;
      font-weight: bold;
    }

    input, button {
      padding: 0.6rem;
      margin-top: 0.3rem;
      width: 100%;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-size: 1rem;
    }

    button {
      margin-top: 1.5rem;
      background-color: #4CAF50;
      color: white;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    button:hover {
      background-color: #45a049;
    }

    .hidden {
      display: none;
    }

    @media (max-width: 480px) {
      body {
        padding: 1rem;
      }

      h1 {
        font-size: 1.5rem;
      }

      form {
        padding: 1rem;
      }

      input, button {
        font-size: 0.95rem;
      }
    }
  </style>
</head>
<body>

  <h1>츼rea Restrita</h1>

  <!-- Tela de login -->
  <form id="loginForm">
    <label for="usuario">Nome:</label>
    <input type="text" id="usuario" required>

    <label for="senha">Senha:</label>
    <input type="password" id="senha" required>

    <button type="submit">Entrar</button>
  </form>

  <!-- Formul치rio de presen칞a -->
  <form id="presencaForm" class="hidden">
    <label for="nome">Nome:</label>
    <input type="text" id="nome" required >

    <label for="telefone">Telefone:</label>
    <input type="tel" id="telefone" required>

    <label for="adultos">Quantidade de Adultos:</label>
    <input type="number" id="adultos" min="0" required>

    <label for="adolescente">Quantidade de Adolescente</label>
    <input type="number" id="adolescente" min="0" required>

    <label for="criancas">Quantidade de Crian칞as:</label>
    <input type="number" id="criancas" min="0" required>

    <button type="submit">Confirmar</button>
  </form>

  <script>
/************************************************************************************************/

/************************************************************************************************/

const loginForm = document.getElementById('loginForm');
const presencaForm = document.getElementById('presencaForm');
const nomeInput = document.getElementById('nome');
const titulo = document.querySelector('h1');

/************************************************************************************************/
// Defina o per칤odo de libera칞칚o do formul치rio (formato: "ano-m칡s-diaThora:minuto")
// Defina o per칤odo de libera칞칚o do formul치rio
const inicio = new Date("2025-04-09T08:00");
const fim = new Date("2025-04-10T11:00");
const agora = new Date();

console.log("Agora:", agora.toISOString());
console.log("In칤cio:", inicio.toISOString());
console.log("Fim:", fim.toISOString());


// 游대 Limpa a lista se j치 passou do tempo
if (agora > fim) {
  localStorage.removeItem('listaConfirmados');
}

// Se o tempo j치 passou, oculta tudo e mostra mensagem
if (!acessoPermitido()) {
  bloquearTela();
}


  // Verifica se o acesso 칠 permitido
  function acessoPermitido() {
    const agora = new Date();
    return agora >= inicio && agora <= fim;
  }

  // Intercepta o envio do formul치rio de login
  
  loginForm.addEventListener('submit', function(event) {
    event.preventDefault();

    if (!acessoPermitido()) {
      alert("O per칤odo de confirma칞칚o j치 terminou. Aguarde uma nova data.");
      bloquearTela();
      return;
    }

    const usuario = document.getElementById('usuario').value.trim();
    const senha = document.getElementById('senha').value;

    if (senha === '1234') {
      // alert('Login realizado com sucesso!'); // Removido conforme solicitado
      loginForm.classList.add('hidden');
      presencaForm.classList.remove('hidden');
      titulo.textContent = "Confirme sua Presen칞a";
      nomeInput.value = usuario;
    } else {
      alert('Senha incorreta!');
    }
  });

  // Intercepta o envio do formul치rio de presen칞a
  presencaForm.addEventListener('submit', function(event) {
    event.preventDefault();

    if (!acessoPermitido()) {
      alert("O tempo para confirmar presen칞a expirou.");
      bloquearTela();
      return;
    }

    const nome = nomeInput.value.trim();
const telefone = document.getElementById('telefone').value.trim();
const adultos = parseInt(document.getElementById('adultos').value);
const adolescente = parseInt(document.getElementById('adolescente').value);
const criancas = parseInt(document.getElementById('criancas').value);

if (!nome || !telefone || isNaN(adultos) || adultos < 0 || isNaN(adolescente) || adolescente < 0 || isNaN(criancas) || criancas < 0) {
  alert("Preencha todos os campos corretamente.");
  return;
}

const novoConfirmado = { nome, telefone, adultos, adolescente, criancas };
let confirmados = JSON.parse(localStorage.getItem('listaConfirmados')) || [];

// Remove registros inv치lidos
confirmados = confirmados.filter(c =>
  c.nome && c.telefone && !isNaN(c.adultos) && !isNaN(c.adolescente) && !isNaN(c.criancas)
);




// Adiciona o novo confirmado
confirmados.push(novoConfirmado);

// Ordena por nome
confirmados.sort((a, b) => a.nome.localeCompare(b.nome));

// Salva no localStorage (apenas uma vez)
localStorage.setItem('listaConfirmados', JSON.stringify(confirmados));


// Redireciona para a p치gina de agradecimento ap칩s confirma칞칚o
window.location.href = "http://127.0.0.1:5500/CART%C3%83O%20VIRTUAL/Cart%C3%A3o-de-presen%C3%A7a-agradecimento.html";
  });

  // Fun칞칚o para bloquear acesso
  function bloquearTela() {
  loginForm.classList.add('hidden');
  presencaForm.classList.add('hidden');

  let mensagem = "";

  const agora = new Date();
  if (agora < inicio) {
    mensagem = "A confirma칞칚o ainda n칚o est치 dispon칤vel. Por favor, aguarde o hor치rio de libera칞칚o.";
  } else if (agora > fim) {
    mensagem = "O tempo para confirmar presen칞a acabou. Aguarde uma nova libera칞칚o.";
    // Limpa lista de confirmados somente quando o tempo acabou
    localStorage.removeItem('listaConfirmados');
  }

  titulo.textContent = "Confirma칞칚o indispon칤vel";
  document.body.innerHTML += `
    <div style="text-align:center; margin-top:2rem; font-size:1.2rem; color:red;">
      ${mensagem}
    </div>
  `;
}


  </script>

</body>
</html>
